#protocols #TCP/IP 

## Do czego służy warstwa aplikacji?
#application_layer
- **Warstwa aplikacji** - najwyższa warstwa; pośredniczy w komunikacji między programami a niższymi warstwami; umożliwia aplikacjom komunikację w sieci

## Jakie są protokoły warstwy aplikacji?
#protocols 
- HTTP/HTTPS, SSH, POP3/SMTP, FTP, DHCP i wiele innych

## Jak działa protokół HTTP/HTTPS?
#HTTP #HTTPS
- Łączę się z serwerem na którym stoi strona internetowa (przez IP tego serwera - DNS to wystarczy nazwa domeny), wysyłam np. komunikat GET /index.html (czyli pobierz), serwer sprawdza czy ma taki zasób, jeśli ma to dostaję RESPONSE 200 (czyli OK), jeśli nie ma to zwraca odpowiedni komunikat/błąd)
- HTTP ma **port 80**
- HTTPS ma **port 443**

## Jak działa protokół SMTP i POP3/IMAP?
#SMTP #POP3 #IMAP
- **MUA (Mail User Agent)** - czyli program pocztowy, np. Outlook, Thunderbird, Gmail
- **MTA (Mail Transfer Agent)** - agent na serwerze do wysyłania wiadomości dalej, do innych serwerów
- **MDA (Mail Delivery Agent)** - agent na serwerze, który "wkłada" wiadomość do skrzynki danego użytkownika
- **POP3** jest jednostronny, umożliwia pobranie wiadomości z serwera do klienta (MUA)
	- słaba synchronizacja klienta z serwerem (czyli jak usunę wiadomość w MUA, to na serwerze dalej ona może zostać)
- **SMTP (Simple Mail Transfer Protocol)** - służy do wysyłania maili (z MUA do MTA albo między serwerami MTA).
- **IMAP (Internet Message Access Protocol)** umożliwia pobieranie wiadomości, synchronizuje dwustronnie dane między MUA a serwerem
	- dobra synchronizacja - jak mam kilka urządzeń na których jest MUA, to niezależnie na którym z tych urządzeń coś zrobię, na innych będę miał to zsynchronizowane, bo serwer jest zsynchronizowany
- **przykład:** w MUA piszę mail, przez protokół SMTP zostaje on wysłany do MTA (serwera), MTA przesyła do kolejnych MTA (aż do miejsca docelowego), na końcowym serwerze MDA wkłada wiadomość do skrzynki odbiorczej danego usera, user po zalogowaniu się do swojego MUA synchronizuje pocztę (IMAP) i odbiera wiadomość (IMAP / POP3, ale POP3 nie jest już używane)
- **SMTP** - **port 25**
- **POP3** - **port 110**
- **IMAP** - **port 143**
- **Szyfrowany SMTP** - **port 465**
- **Szyfrowany POP3** - **port 995**
- **Szyfrowany IMAP** - **port 993**

## Jak działa protokół FTP?
#FTP 
- **FTP (File Transfer Protocol)** - upload i download plików
- **FTP** - **port 20**
- Ustanawia połączenie sterujące (port 21 - **control connection**) i umożliwia wymianę plików (port 20).

## Jak działa protokół SSH?
#SSH #TELNET
- **Telnet** - stary protokół do połączenia zdalnego z urządzeniem, bez szyfrowania.
	- Gdyby ktoś był w naszej sieci i podsłuchiwał, to z łatwością mógłby odczytać co robimy (man-in-the-middle)
- **SSH** - protokół do połączenia zdalnego z urządzeniem, z szyfrowaniem.
	- **klucz prywatny** - niejawny klucz kryptograficzny, do odszyfrowywania danych i do uwierzytelniania użytkownika w protokole SSH. Nigdy nie powinien być udostępniany. Bez niego nie da się odszyfrować danych.
	- **klucz publiczny** - jawny klucz kryptograficzny do szyfrowania danych oraz do weryfikacji podpisów cyfrowych.
		- oba klucze tworzą parę, bez której komunikacja w SSH byłaby niemożliwa
	- **klucz sesji** - losowo generowany klucz sesji, używany na czas jednej sesji.
	- **known hosts** - plik zawierający dane identyfikujące wszystkie serwery, które uprzednio nawiązały połączenie przez SSH; zabezpiecza przed atakami typu man-in-the-middle

## Jak działa protokół DNS?
#DNS 
- **DNS (Domain Name System)** - tłumaczy nazwę domeny (np. youtube.com) na adres IP
	- wysyłam do serwera DNS nazwę domeny, na serwerze działa DNS Resolver - ma w pamięci nazwy domen i adresy IP, w odpowiedzi dostaję adres IP czyli zostaję przeniesiony na daną stronę
	- serwery DNS mają swoje szczeble:
		- **root** - zna adresy serwerów, które obsługują wszystkie domeny najwyższego poziomu (.com, .gov, .pl, itd.)
		- **TLD** - tu są serwery wskazanych wyżej domen i subdomen (.org.pl, itd.)
		- **Autorytatywne serwery domen** - przechowują informacje o konkretnych domenach (np. youtube.com)
			- jak mój resolver nie zna IP domeny, to zwraca się do root, root wskazuje adres TLD w którym trzeba szukać dalej, TLD wskazuje kolejny serwer który ma nazwę domeny, po znalezieniu bezpośrednio do mojego komputera przesyłany jest adres IP 
	- **Cache DNS** - zapisuje strony, z których najczęściej korzystam i działa jak taki DNS w pierwszej kolejności