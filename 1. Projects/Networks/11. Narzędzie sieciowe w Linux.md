#linux_network_tools

## Do czego służy plik /etc/hosts?
#/etc/hosts
- Plik **/etc/hosts** jest tablicą hostów
	- umożliwia szybszy dostęp do często odwiedzanych hostów
		- działa jak lokalna mini-tablica DNS
	- **składnia pliku:**
		- adres_IP nazwa_domeny opcjonalny_alias
			- np. 35.268.6.169 twojastara.pl stara

## Do czego służy plik /etc/nsswitch.conf
#/etc/nsswitch 
- Plik **/etc/nsswitch.conf** określa w jakiej kolejności system poszukuje informacji o różnych zasobach
	- ![[Pasted image 20250821195537.png]]
	- powyższe: priorytet rozwiązywania nazw hostów
		- **przykład:** wpisuję w przeglądarkę youtube.com > najpierw przeszukiwany jest plik odpowiedzialny za nazwy hostów, czyli **/etc/hosts** > jeśli brak rozwiązania, to przechodzi dalej > mDNS przeszukuje sieć LAN w której jestem > jeśli brak rozwiązania, to wychodzi (NOTFOUND=return, czyli nie przeszukuje dalej w nieskończoność) i przechodzi dalej > zapytanie wysyłane jest do lokalnego **resolver stub**
			- dns (tutaj priorytet 3) wskazuje na adres IP z pliku **resolv.conf**, pod tym adresem działa **systemd-resolved**, a systemd-resolved wskazuje na właściwy adres IP serwera DNS - przeważnie wskazuje na lokalny router, który dalej przekazuje zapytania do właściwego serwera DNS

## Do czego służy plik /etc/resolv.conf?
#/etc/resolv 
- Plik **/etc/resolv.conf** wskazuje, gdzie system ma kierować zapytania DNS; w pliku można znaleźć:
	- **nameserver *adres_IP*** - przeważnie adres lokalnego routera, który wysyła zapytanie dalej, do właściwego serwera DNS lub adres loopback, czyli komputer zapytuje własnego procesu (systemd-resolved), który kieruje zapytanie dalej do routera i dalej do serwera DNS
	- **search *home*** - odwołanie do lokalnych urządzeń po nazwie
		- lokalny router nadaje nazwy domen urządzeniom w sieci, aby można było się komunikować również poprzez nazwy urządzeń
		- jeśli zrobiłbym tutaj **ping telewizor** to system spróbuje rozwiązać nazwę **telewizor.home**

## Do czego służą pliki z katalogu /etc/netplan?
#/etc/netplan
- Pliki **/etc/netplan/\*.yaml** służą do stałej konfiguracji ustawień sieciowych komputera
	- ustawienia DHCP, związane z WiFi (np. nazwa, hasło do WiFi), itp.

## Do czego służy ifconfig?
#ifconfig
- **ifconfig** - wyświetla podstawowe informacje sieciowe o urządzeniu, np. adres IP, maska podsieci, broadcast
	- starsze narzędzie, obecnie wymaga instalacji net-tools

## Do czego służy program ip?
#ip
- **ip** - zaawansowane narzędzie do sterowania wszystkimi aspektami sieci
	- m.in. powiela funkcje ifconfig, resolv.conf, interfaces, itp. w jedno, bardziej zaawansowane wydanie

## Do czego służy ping?
#ping
- **ping *adres_IP*** - służy do sprawdzenia, czy istnieje łączność i jaka jest jakość połączenia między dwoma urządzeniami
	- wysyła pakiety **ICMP Echo Request**, a jeśli urządzenie odpowiada to odsyła **ICMP Echo Reply** 
	- ICMP to protokół, który nie ma przypisanego portu i działa w warstwie sieciowej/internetowej
	- **-s** - wielkość pakietu próbnego
	- **-t ttl** - time to live
	- **-c** - liczba wysłanych pakietów
	- **-i** - czas pomiędzy odpytaniami

## Do czego służy traceroute?
#traceroute
- **traceroute** - bada dokładną trasę połączenia między hostami, pokazuje urządzenia pośredniczące oraz czasu transferu pakietu
	- np. **sudo traceroute -I youtube.com**
		- w odpowiedzi będzie cała trasa i adresy IP urządzeń po drodze do serwera z adresem youtube.com
	- **-I** - wykorzystuje ICMP, działa trochę jak ping; przydatne, gdy nie chcemy żeby nasze śledzenie trasy zostało zablokowane przez firewalla
	- **-T** - użycie protokołu TCP
	- **-U** - użycie protokołu UDP
	- **-m** - max. liczba przeskoków (domyślnie 30)
	- **-4/-6** - użycie protokołu IPv4 lub IPv6
	- jeśli w terminalu zamiast adresów pojawią się **\*\*\*** to oznacza, że w tym punkcie nie dało się odpytać danego hosta; przeskok nastąpił, ale nie możemy zobaczyć trasy w tym punkcie
	
## Do czego służy nslookup?
#nslookup
- **nslookup** - narzędzie do odpytania serwerów DNS o zapisane rekordy dla podanej strony/adresu

## Do czego służy dig?
#dig
- **dig** - narzędzie do odpytywania serwerów DNS, bardziej zaawansowane
	- **dig *domeny*** - pokaże wpisy DNS dla wpisanego adresu
	- **dig *@IP_serwera_DNS* *domena*** - sprawdzi wpisy DNS na konkretnym, wskazanym serwerze dla danej domeny
	- **dig -x *adres_IP*** - zwróci nazwę domeny dla danego adresu IP
	- **dig *domena* +trace** - pokaże ścieżkę odpytań serwerów DNS
	- **dig *domena* +short** - zwróci sam wynik
	- **dig -f *nazwa_pliku* +short** - pokaże adresy dla wszystkich domen z pliku

## Do czego służy wget?
#wget 
- **wget** - narzędzie do pobierania danych z Internetu (np. dane, HTML stron internetowych); obsługuje protokoły HTTP, HTTPS, FTP
	- **wget *URL* -O *własna_nazwa_pliku*** - pobrany plik będzie miał ustaloną nazwę
	- **wget -q *url*** - tryb cichy, nie wyświetla danych o pobieraniu na konsoli
	- **wget -c *url*** - wznawia pobieranie częściowo zapisanego pliku (bardzo przydatne, jeśli pobieranie w czasie zostanie przerwane)
	- **wget -b *url*** - pobieranie w tle, czyli poza terminalem; można wyłączyć terminal, a pobieranie nadal się odbędzie
	- **wget -nv *url*** - wyświetla tylko informacje o błędach
	- **wget -i *nazwa_pliku*** - pobiera dane wypisane w podanym pliku
	- **--no-check-certificate** - pozwala pobierać pliki z niezaufanego źródła (pomija weryfikację certyfikatu SSL)
	- **wget -m *url*** - pobiera całą stronę internetową
	- **wget -o *nazwa_pliku* *url*** - zapisuje wynik komendy do podanego pliku
	- **wget --user=login *url*** - pozwala jednocześnie zalogować się swoim loginem na zabezpieczony serwer
		- **--ftp-user=login** - login dla protokołu FTP
		- **--http-user=login** - jw. dla protokołu HTTP
			- **--password=pass** - pozwala podać hasło do zalogowania się **(jest to niebezpieczne, łatwo je podpatrzeć lub znaleźć w historii komend)**
			- **--ask-password** - pyta o hasło, które podaje się w konsoli, aby nie zostawiać pisanego śladu hasła w logach

## Do czego służy curl?
#curl
- **curl** - bardziej uniwersalne narzędzie do pobierania danych i komunikacji sieciowe; obsługuje ponad 20 protokołów; potrafi wysyłać zapytania z nagłówkami, cookies, danymi POST/JSON; **idealny do testowania API i usług sieciowych**
	- **curl -O *url*** - zapisze wynik zapytania do pliku (stworzy się plik o nazwie ze źródła)
	- **curl -o *nazwa_pliku* *url*** - stworzy pllik o podanej nazwie i do niego zapisze wynik zapytania
	- **curl -I *url*** - wyświetla nagłówki HTTP z podanej strony
	- **curl -L *url*** - podąża za przekierowaniami i wyświetla wynik finalnej strony
	- **curl -b *"string"* *url*** - wysyła *"string"* do cookies strony; zamiast stringa można też podać plik cookies
	- **curl -x *proxy* *url*** - pobiera dane wykorzystując proxy (format IP:port)
	- **curl -U user:pass** - przesyła login/hasło dla proxy lub strony wymagającej autoryzacji
	- **curl -V *url*** - verbose, pokazuje więcej informacji na temat działania

## Jakie są kody odpowiedzi do zapytań w sieci?
- **1xx** - informacyjne
- **2xx** - powodzenie/potwierdzenie
- **3xx** - przekierowanie
- **4xx** - błąd aplikacji
- **5xx** - błąd serwera HTTP