#docker

## Do czego służy Docker?
#docker 
- **Docker** - platforma do **konteneryzacji aplikacji**, czyli uruchamiania ich w odizolowanym środowisku; składa się z:
	- **Docker Client** - klient Dockera, poprzez którego łączę się z hostem
		- wysyłanie poleceń do hosta (docker build, docker run, docker pull, itp.)
	- **Docker Host** - maszyna, na której działa Docker Daemon
		- Docker Daemon to **silnik Dockera (engine)**, który zarządza obrazami, kontenerami, sieciami, wolumenami
	- **Obraz (image)** - szablon środowiska kontenera
		- na jego bazie tworzone są kontenery
		- **Docker Registry** - tutaj znajdują się wszystkie obrazy
	- **Kontener** - proces działający na Hoście ze skonfigurowanym środowiskiem poprzez obraz
	- ![[Pasted image 20250825173757.png]]
	- 

## Czym jest i do czego służy kontener?
#container
- **Kontener** - odizolowane środowisko przeznaczone pod daną aplikację, zawierające potrzebne biblioteki, konfiguracje, itd.
	- korzysta z kernela fizycznej maszyny, na której się znajduje (VM ma własny kernel)
		- czyli **nie emuluje całego systemu, tylko wydziela jego część**
			- dzięki temu jest lżejszy od VM
		- izoluje procesy
		- **ZASTOSOWANIE:** gdy na jednym serwerze potrzebujemy uruchomić różne aplikacje, które z kolei potrzebują różnych środowisk i konfiguracji, to bez konteneryzacji musielibyśmy je uruchamiać obok siebie, co powodowałoby konflikty w wydajności i konfiguracjach (jedna apka mogłaby zakłócać inną); stąd kontenery

## Jak działa uruchamianie kontenera na podstawie obrazu?
#image #container
- **Obrazy składają się z warstw** (więcej o tym przy Dockerfile); przykładowych Dockerfile
	```
	1. FROM ubuntu:20.04
	2. RUN apt-get update && apt-get install -y python3
	3. COPY app.py /app/app.py
	4. CMD ["python3", "/app/app.py"]
	```
	- 1. bazowy obraz, minimalny system Ubuntu
	- 2. nowa warstwa z zainstalowanym Pythonem
	- 3. nowa warstwa z jakąś aplikacją (app.py)
	- 4. nie dodaje plików, tylko zapisuje metadane o tym, jak uruchomić kontener
- Kontener przy uruchamianiu **składa wszystkie warstwy w jeden system plików**, na wierzch tego dodaje **container layer**, gdzie można zapisywać zmiany podczas działania kontenera

## Jak zainstalować Docker?
#installation
- [Docker installation on Linux](https://docs.docker.com/desktop/setup/install/linux/)
	- wystarczy pójść krok po kroku
	- najpierw Docker Engine, potem Docker Desktop

## Jak uruchomić kontener?
#docker_run
- **docker run -d --name my-container-smth -p 8080:80 docker/getting-started**
	- **-d** - kontener działa w tle (background)
		- gdyby uruchomić bez -d, to wszystko co wypisuje aplikacja (np. logi) wylądowałoby na terminalu
	- **-p 8080:80** - zmapuj port hosta 8080 na port 80 w kontenerze
		- czyli żądanie najpierw trafia do hosta na porcie 8080, a później docker przekazuje je do kontenera na port 80
			- **port 8080** to zazwyczaj alternatywny port HTTP; taka jest konwencja, że używa się tego portu do developmentu, testów, uruchamiania aplikacji webowych gdy port 80 (standardowy HTTP) jest zajęty
		- mapowanie, ponieważ wiele aplikacji w kontenerach nasłuchuje na tych samych, standardowych portach
	- **--name *nazwa_kontenera*** - nadanie własnej nazwy kontenera
	- **docker/getting-started** - nazwa obrazu





- [Docker kurs](https://www.youtube.com/watch?v=WlntE7QUcBY&list=PLj-pbEqbjo6ABYxLDCKqvo3e0flutpbCy&index=3)