#PostgreSQL 
- Baza danych - zbiór zorganizowanych danych
- Tablica - ma kolumny (kategorie) i wiersze (komplet danych dla jednego elementu bazy)
- Relacyjne bazy danych - relacja między 1 lub większą liczbą baz danych
	- ![[Pasted image 20260101141655.png]]

## Jakie są podstawowe komendy SQL i obsługa PostgreSQL?
#basics 
- **`\l`** - wyświetla listę baz danych
- **`\c db_name`** - wejście do wskazanej bazy danych
- **`\d`** - lista elementów w bazie danych
	- **`\dt`** - lista samych tablic
- **`\d table_name`** - szczegóły tablicy (nazwy kolumn, typy danych, itd.)
- **`CREATE DATABASE name;`** - utworzenie bazy danych
- **`DROP DATABASE name;`** - usunięcie bazy danych (kasuje wszystkie dane, więc ostrożnie z tą komendą, jeśli nie ma backupu)
- **`CREATE TABLE person (column_name + data_type + contraints if any)`** - utworzenie tabeli
	- przykład:
```
CREATE TABLE person (
	id int, # id - column_name, int - data_type
	first_name VARCHAR(50), # VARCHAR(50) - tylko znaki, max 50
	last_name VARCHAR(50),
	gender VARCHAR(6),
	date_of_birth DATE );
```
- poniżej przykład tabeli z *contraints* (ograniczenia), dzięki którym wszystkie pola są wymagane:
```
CREATE TABLE person (
	id BIGSERIAL NOT NULL PRIMARY KEY,
		# BIGSERIAL - integer który sam się inkrementuje
		# PRIMARY KEY - klucz główny, wartości w tej kolumnie muszą być unikalne i nie powtarzać się
	first_name VARCHAR(50) NOT NULL,
	last_name VARCHAR(50) NOT NULL,
	gender VARCHAR(6) NOT NULL,
	date_of_birth DATE NOT NULL );
```
- **`DROP TABLE name;`** - usuwa tablicę
- **`ALTER TABLE table_name ADD COLUMN email VARCHAR(70);`** - dodanie kolumny do istniejącej już tabeli
- **`INSERT INTO person (first_name, last_name, gender, date_of_birth) VALUES ('Adrian', 'Wozniak', 'Male', DATE '2000-02-08');`** - wpisanie danych do tabeli
	- po insert definiuję które kolumny uzupełniam, a po values jakie wartości wpisuję do kolumn
	- id tutaj uzupełnia się samo, jeśli było nadane BIGSERIAL
- **`SELECT * FROM table_name;`** - wyświetli wszystkie wiersze i kolumny z tabeli

## Jakie są typy danych w SQL?
#data_types
- [PostgreSQL Data Types](https://www.postgresql.org/docs/11/datatype.html) - typy danych z dokumentacji PostgreSQL

## Jak zrobić insert danych z pliku do tabeli?
#file_to_table
- Strona **Mockaroo** - pozwala wygenerować duże ilości danych i wyeksportować je w formie pliku `.sql`
- **`\i ścieżka_do_pliku_sqk`** - pozwala na wykonanie komend z pliku sql

## Do czego służy Primary Key?
#primary_key
- **Primary key** - klucz, czyli kolumna która jednoznacznie identyfikuje każdy wiersz. Może być tylko jeden klucz na tabelę.

## Jak działa SELECT FROM?
#SELECT
- **`SELECT * FROM table_name;`** - select służy do wyboru kolumny
	- \* - wszystkie kolumny

## Jak działa ORDER BY?
#ORDER_BY
- **`SELECT * FROM person ORDER BY country_of_birth ASC/DESC;`** - sortowanie ascending lub descending order według wartości wybranej kolumny

## Jak działa DISTINCT?
#DISTINCT
- **`SELECT DISTINCT country_of_birth FROM person ORDER BY country_of_birth;`** - pozbywa się duplikatów z wybranej kolumny

## Jak działa WHERE i AND?
#WHERE #AND
- **`SELECT * FROM person WHERE gender = 'Male';`** - wyświetla kolumny w których wartości wskazanej kolumny spełniają podany warunek
- **`SELECT * FROM person WHERE gender = 'Male' AND country_of_birth = 'Poland';`** - warunek łączony
- **`SELECT * FROM person WHERE gender = 'Male' AND (country_of_birth = 'Poland' OR country_of_birth = 'China');`** - warunek łączony

## Jak działają comparison operators?
#comparison
- **Comparison operators** - operatory porównania, które zwracają `t` (true) lub `f` (false); czyli zwykłe booleany
	- `SELECT 1 = 1`
		- `t`
	- `SELECT 1 < 1`
		- `f`
- `<=`, `>=`, `<`, `>`, `=`
- `<>` - różne
	- `SELECT 1 <> 2`
		- `t`

## Jak działają LIMIT, OFFSET i FETCH?
#LIMIT #OFFSET #FETCH
- **`SELECT * FROM person ORDER BY country_of_birth LIMIT 10;`** - wyświetli wskazaną przez limit liczbę wierszy
- **`SELECT * FROM person ORDER BY country_of_birth OFFSET 5 LIMIT 10;`** - pominie wskazaną przez offset liczbę pierwszych wierszy i wyświetli wskazaną przez limit liczbę wierszy
- **`SELECT * FROM person ORDER BY country_of_birth OFFSET 5 FETCH FIRST 10 ROW ONLY;`** - działa tak samo jak LIMIT

## Jak działa IN?
#IN
- **`SELECT * FROM person WHERE country_of_birth IN ('China', 'Poland', 'Brazil');`** - wypisze wiersze ze wskazanymi w zbiorze () wartościami

## Jak działa BETWEEN?
#BETWEEN
- **`... WHERE date_of_birth BETWEEN DATE '2020-01-01' AND 2026-01-02;`** - wiersze które są we wskazanym zakresie dat; czyli range

## Jak działa LIKE i ILIKE?
#LIKE #ILIKE
- **`... WHERE country_of_birth LIKE '%land';`** - wyszukiwanie po patternach
- **`... WHERE country_of_birth ILIKE '%land';`** - wyszukiwanie po patternach, wielkość liter nie ma znaczenia
## Jak działa GROUP BY?
#GROUP_BY
- **`SELECT country_of_birth, COUNT(*) FROM person GROUP BY country_of_birth;`** - group by wymaga podania kolumny i np. funkcji agregującej; w tym wypadku wyświetli kraje bez duplikatów i zsumuje liczbę osób w tych krajach
- **`SELECT country_of_birth, COUNT(*) FROM person GROUP BY country_of_birth HAVING COUNT(*) > 5;`** - ograniczy do tych grup, które mając więcej niż 5 elementów