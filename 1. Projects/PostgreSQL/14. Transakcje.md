#transactions
## Czym są transakcje?
#transactions 
- **Transakcja** - grupa operacji, polegająca na tym, że albo wykonają się wszystkie operacje albo nie wykona się żadna
	- np. transakcja bankowa: z jednego konta zabierz 100zł, do drugiego konta dodaj 100zł
		- gdyby w połowie miało się coś wykrzaczyć, to jedno konto nie ma 100zł, a drugie niczego nie dostało, więc jest chaos
	- **transakcje opierają się na ACID**

## Czym jest ACID?
#ACID
- **A - Atomicity** - atomowość; wykona się wszystko albo nic
	- jeśli jakakolwiek operacja się nie uda, cała transakcja jest cofana
- **C - Consistency** - spójność; po transakcji foreign keys się zgadzają, constrainty są spełnione
- **I - Isolation** - izolacja; równoległe transakcje nie psują sobie danych
	- dwie transakcje jednocześnie nie powinny interferować między sobą
- **D - Durability** - trwałość; jeśli transakcja została wykonana i zamknięta, to dane są zapisane na stałe
	- nawet jeśli sekundę później serwer padł

## Jak używać transakcji?
#transactions #BEGIN #ROLLBACK #commit 
```BEGIN;
UPDATE person SET first_name = 'Adrian' WHERE first_name = 'Ardian';
ROLLBACK;
-- służy do cofania transakcji jeśli popełniłem błąd; wycofuje wszystkie zmiany wprowadzone w transakcji
COMMIT; 
-- zamyka transakcję
```
- jeśli popełnię błąd w dowolnej query w trakcie trwania transakcji, to **`ROLLBACK`** cofnie wszystkie operacje
- **`COMMIT`** zamknie transakcję i zapisze zmiany
- 